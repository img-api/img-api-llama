import ollama
import json

article = "Intel Corp.’s (INTC) shares jumped 6.4% following report that the company qualified for $3.5 billion in federal grants to make semiconductors for the U.S. Department of Defense. Shares of The Boeing Co. (BA) fell 0.8% after the company announced plans freezing hiring and weighing temporary furloughs in the coming weeks. Shares of Nuvalent Inc.’s (NUVL) soared 28.3% after the company released positive data on two experimental cancer treatments over the weekend. Alcoa Corporation (AA) shares climbed 6.1% after the company agreed to sell its full 25.1% ownership in the Ma’aden joint venture for about $1.1 billion. Want the latest recommendations from Zacks Investment Research? Today, you can download 7 Best Stocks for the Next 30 Days. Click to get this free report The Boeing Company (BA) : Free Stock Analysis Report Intel Corporation (INTC) : Free Stock Analysis Report Alcoa (AA) : Free Stock Analysis Report Nuvalent, Inc. (NUVL) : Free Stock Analysis Report To read this article on Zacks.com click here. Zacks Investment Research"

article_neutral = "As markets rise in anticipation of the Fed cutting rates tomorrow, Intel INTC and Amazon AMZN have helped lead the broader rally among tech stocks after announcing plans to expand their partnership on Monday. Intel’s stock had popped +8% in today’s trading session after recently falling to a 10-year low of $18 a share in August. Meanwhile, Amazon shares were up as much as +2% in early morning trading and are now sitting on gains of over +20% for the year with AMZN edging toward $200. Zacks Investment Research Image Source: Zacks Investment Research Partnership Overview: Enhancing AWS Cloud Services With Intel having a long-standing partnership to support Amazon’s cloud segment Amazon Web Services (AWS), the iconic tech companies have a new agreement to develop custom AI chips. The chips will be developed using Intel’s 18A process which is designed to enhance performance and energy efficiency in a bid to boost the AI-as-a-service (AIaas) offerings of AWS. Perfect Timing for Intel Losing ground to many of its semiconductor peers, Intel stated its partnership to provide AI-powered chips for Amazon will be a multiyear, multibillion-dollar deal. The timing couldn’t be better as it gives Intel another opportunity to regain its footing as a major chip manufacturer after drastically losing market share to Nvidia NVDA and AMD AMD. This may also quiet fears of Intel being able to preserve enough cash and gateways to growth to support the costly operations of its foundry business as a chip producer for other companies. These concerns have largely loomed despite Intel having $29.27 billion in cash & equivalents at the end of Q2 2024 and $206.2 billion in total assets compared to $85.77 billion in total liabilities. However, Intel’s sales and operating performance have steeply contracted in recent years although a modest rebound is expected in fiscal 2025. Notably, to capitalize on the collaboration with Amazon, Intel will be splitting its foundry business into an independent subsidiary to improve the segment’s efficiency. Zacks Investment Research Image Source: Zacks Investment Research Amazon’s Upper Echelon Growth & Balance Sheet Luckily for Intel, it has continued a lucrative partnership with a cash cow in Amazon, with the e-commerce leader and tech conglomerate having over $89 billion in cash & equivalents. Furthermore, Amazon has $554.18 billion in total assets versus $318.37 billion in total liabilities. Zacks Investment Research Image Source: Zacks Investment Research The Magnificent Seven-themed tech stock is expected to see high double-digit EPS growth in FY24 and FY25 with total sales projected to increase by over 10% in these fiscal years respectively. Notably, Amazon’s top line is edging toward a whopping $700 billion. Zacks Investment Research Image Source: Zacks Investment Research Final Thoughts Amazon and Intel’s stock both land a Zacks Rank #3 (Hold). The continued partnership between these tech giants should be lucrative for both companies and certainly adds to their prospects of being viable long-term investments. However, there could be better buying opportunities in Amazon’s stock after a sharp YTD rally while it may be too soon to say Intel shares are at an inflection point in regards to a continued rebound. Want the latest recommendations from Zacks Investment Research? Today, you can download 7 Best Stocks for the Next 30 Days. Click to get this free report Amazon.com, Inc. (AMZN) : Free Stock Analysis Report Intel Corporation (INTC) : "

article = "TimesSquare Capital Management, an equity investment management company, released its “U.S. Small Cap Growth Strategy” second-quarter 2024 investor letter. A copy of the letter can be downloaded here. In the quarter the fund returned -1.59% (gross) and -1.83% (net), compared to a -2.92% return for the Russell 2000 Growth Index. The equity markets performed well in the second quarter, as long as one held only a handful of the biggest, fastest-growing U.S. stocks. Despite profitability turning positive this quarter following negative or neutral results in previous quarters, momentum remained the most important component in the worldwide market. In addition, please check the fund’s top five holdings to know its best picks in 2024. TimesSquare Capital Management U.S. Small Cap Growth Strategy highlighted stocks like Certara, Inc. (NASDAQ:CERT), in the second quarter 2024 investor letter. Certara, Inc. (NASDAQ:CERT) offers software products and technology-enabled services to customers for bio-simulation in drug discovery, preclinical and clinical research, regulatory submissions, and market access. The one-month return of Certara, Inc. (NASDAQ:CERT) was -16.73%, and its shares lost 24.81% of their value over the last 52 weeks. On September 16, 2024, Certara, Inc. (NASDAQ:CERT) stock closed at $10.70 per share with a market capitalization of $1.722 billion. TimesSquare Capital Management U.S. Small Cap Growth Strategy stated the following regarding Certara, Inc. (NASDAQ:CERT) in its Q2 2024 investor letter: Our preferences among Health Care stocks are those companies providing novel therapies for unmet needs that deserve premium pricing, or specialized service providers. Certara, Inc. (NASDAQ:CERT) provides products and technology-enabled services to its customers for bio simulation in drug discovery, clinical research, and regulatory submission. First quarter revenues outpaced estimates, driven by better-than-expected performance in both software and services. Bookings however fell short and that led to a -22% selloff. Biotech funding and clinical trial starts have continued to improve. Thus, we decided to add to the position on weakness. A Biote-certified practitioner examining a patient's blood sample under a microscope. Certara, Inc. (NASDAQ:CERT) is not on our list of 31 Most Popular Stocks Among Hedge Funds. As per our database, 11 hedge fund portfolios held Certara, Inc. (NASDAQ:CERT) at the end of the second quarter which was 13 in the previous quarter. The second quarter revenue of Certara, Inc. (NASDAQ:CERT) grew 3% to $93.3 million. While we acknowledge the potential of Certara, Inc. (NASDAQ:CERT) as an investment, our conviction lies in the belief that AI stocks hold greater promise for delivering higher returns, and doing so within a shorter timeframe. If you are looking for an AI stock that is as promising as NVIDIA but that trades at less than 5 times its earnings, check out our report about the cheapest AI stock. In another article, we discussed Certara, Inc. (NASDAQ:CERT) and shared the list of best medical AI companies. Certara, Inc. (NASDAQ:CERT) detracted from the performance of The London Company Small Cap Strategy during Q2 2024. In addition, please check out our hedge fund investor letters Q2 2024 page for more investor letters from hedge funds and other leading investors. READ NEXT: Michael Burry Is Selling These Stocks and A New Dawn Is Coming to US Stocks. Disclosure: None. This article is originally published at Insider Monkey. View Comments"

bullshit = "Translate from bullshit to no-bullshit. Be funny and sarcastic. Shorten text."

gif_prompt = "add a funny list of keywords appropiate to the article to find an image and meme related"

prompt = f"from the following article, clean the article, {gif_prompt}, evaluate the sentiment in the stock market for the company involved. Use markdown to highlight important parts on the texts. Write a bullshit to no bullshit field as descripted  \nArticle: {article} "


def run_prompt(prompt) :
    response = ollama.chat(
        model="llama3.1",
        messages=[{"role": "user", "content": prompt}],
        tools=[
            {
                "type": "function",
                "function": {
                    "name": "set_article_information",
                    "description": "Set all the information about the article provided",
                    "parameters": {
                        "type": "object",
                        "properties": {
                            "gif_keywords": {
                                "type": "string",
                                "description": "keywords to search on a gif website",
                            },
                            "title": {
                                "type": "string",
                                "description": "a one line title describing the article",
                            },
                            "paragraph": {
                                "type": "string",
                                "description": "a one paragraph, not long text. This should be a small very short summary to display as a note",
                            },
                            "summary": {
                                "type": "string",
                                "description": "a two to three paragraph summary",
                            },
                            "no_bullshit": {
                                "type": "string",
                                "description": bullshit,
                            },
                            "sentiment": {
                                "type": "string",
                                "enum": [ "positive", "negative", "neutral" ],
                                "description": "The sentiment positive, negative, neutral",
                            },
                            "sentiment_score": {
                                "type": "integer",
                                "description": "A value from -10 to 10 that represents how much impact will have on the stock. -10 means will go down, 10 bullish",
                            },
                        },
                        "required": ["paragraph", "sentiment", "tile", "summary", "no_bullshit", "gif_keywords"],
                    },
                },
            }
        ],
    )

    if "tool_calls" not in response["message"]:
        print("Failed loading json")
        return None


    try:
        result = response["message"]["tool_calls"]

        #with open("test_return.json", "w") as f:
        #   json.dump(result, f, indent=4)

        dmp = json.dumps(result, indent=4)
        print(dmp)
    except json.JSONDecodeError as e:
        print(f"Invalid JSON format Error: {e}")

    return True


res = run_prompt(prompt)
if not res:
    print(" RETRY, MAYBE OUR LLAMA WAS LAZY ")
    res = run_prompt(prompt)
